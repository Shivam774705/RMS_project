{% extends "base.html" %}
{% block div_class %}no-sidebar{% endblock %}
{% block body %}

<style>

    :root {
        --background-light: #eef3f7;
        --background-dark: #0f172a;
        --card-light: #fff;
        --card-dark: #1e293b;
        --card-text-light: #233344;
        --card-text-dark: #cbd5e1;
        --card-border-light: #e4e8ef;
        --card-border-dark: #334155;
        --shadow-light: 0 1px 3px rgba(0, 0, 0, 0.1);
        --shadow-dark: 0 1px 2px rgba(0, 0, 0, 0.5);
    }

    div.no-sidebar .sidebar {
        display: none !important;
    }

    div.no-sidebar .main-content {
        margin-left: 0 !important;
    }

    .main-content {
        background: transparent;
        padding: 5rem 5rem;
    }

    body.dark-mode {
        background-color: var(--background-dark);
        color: var(--card-text-dark);
    }

    body.dark-mode h4,
    body.dark-mode .filter-label {
        color: #e2e8f0;
    }

    .filter-bar {
        background: var(--card-light);
        border: 1px solid var(--card-border-light);
        border-radius: 12px;
        padding: 1.5rem;
        display: flex;
        flex-wrap: wrap;
        gap: 1.5rem;
        margin-bottom: 2rem;
        box-shadow: var(--shadow-light);
    }

    body.dark-mode .filter-bar {
        background: var(--card-dark);
        border-color: var(--card-border-dark);
        box-shadow: var(--shadow-dark);
    }

    .filter-group {
        display: flex;
        flex-direction: column;
        min-width: 150px;
        flex: 1;
    }

    .filter-label {
        font-weight: 500;
        font-size: 0.875rem;
        margin-bottom: 0.5rem;
        color: #475569;
    }

    body.dark-mode .filter-label {
        color: #94a3b8;
    }

    .filter-select,
    .filter-input {
        background: #f1f5f9;
        color: var(--text-light);
        border: 1px solid #cbd5e1;
        border-radius: 8px;
        padding: 0.6rem 0.75rem;
        font-size: 1rem;
        width: 100%;
    }

    body.dark-mode .filter-select,
    body.dark-mode .filter-input {
        background: #334155;
        color: #f1f5f9;
        border: 1px solid #475569;
    }

    .filter-select:focus,
    .filter-input:focus {
        outline: 2px solid #3b82f6;
        border-color: transparent;
    }

    .search-button {
        background-color: #3b82f6;
        color: white;
        font-weight: 600;
        border: none;
        border-radius: 8px;
        padding: 0.6rem 1rem;
        cursor: pointer;
        height: 100%;
        transition: background-color 0.2s;
    }

    .search-button:hover {
        background-color: #2563eb;
    }

    .results-table-wrapper {
        background: var(--card-light);
        border: 1px solid var(--card-border-light);
        border-radius: 12px;
        padding: 0.5rem;
        box-shadow: var(--shadow-light);
    }

    body.dark-mode .results-table-wrapper {
        background: var(--card-dark);
        border-color: var(--card-border-dark);
        box-shadow: var(--shadow-dark);
    }

    .results-table {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
    }

    .results-table th,
    .results-table td {
        padding: 1rem 1.25rem;
        text-align: left;
        border-bottom: 1px solid var(--card-border-light);
    }

    body.dark-mode .results-table th,
    body.dark-mode .results-table td {
        border-bottom: 1px solid var(--card-border-dark);
    }

    .results-table thead th {
        font-weight: 600;
        font-size: 0.875rem;
        text-transform: uppercase;
        color: #64748b;
    }

    body.dark-mode .results-table thead th {
        color: #94a3b8;
    }

    .results-table tbody tr:last-child td {
        border-bottom: none;
    }

    .results-table tbody tr {
        transition: background-color 0.2s;
    }

    .results-table tbody tr:hover {
        background-color: #f8fafc;
    }

    body.dark-mode .results-table tbody tr:hover {
        background-color: #28354a;
    }
</style>

<main class="main-content">
    <div class="container-fluid">
        <a href="/index">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="none" stroke="currentColor"
                viewBox="0 0 18 18" style="vertical-align: middle; margin-right: 7px">
                <path d="M12 15l-6-6 6-6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
            Back
        </a>

        {% include "filters.html" %}

        <div class="results-table-wrapper">
            <div class="table-responsive">
                <table class="results-table">
                    <thead>
                        <tr>
                            <th>IMEI NO</th>
                            <th>Number</th>
                            <th>Site_id</th>
                            <th>Alarms</th>
                            <th>Created_at</th>
                            <th>call_result</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for call in rovo_call %}
                        <tr>
                            <td>{{ call.imei_no }}</td>
                            <td>{{ call.enter_days }}</td>
                            <td>{{ call.caller_number }}</td>
                            <td>{{ call.start_time|date:"Y-m-d H:i" }}</td>
                            <td>{{ call.end_time|date:"Y-m-d H:i" }}</td>
                            <td>{{ call.status }}</td>
                            <td>{{ call.duration }}</td>
                        </tr>
                        {% empty %}
                        <tr>
                            <td colspan="7" class="text-center p-5">No call records found.</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</main>

{% endblock body %}